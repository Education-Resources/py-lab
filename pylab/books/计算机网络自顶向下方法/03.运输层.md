## 运输层

运输层位于应用层和网络层之间，是分层的网络体系结构的重要部份。该层为运行在不同主机上的应用进程提供直接的通信服务起着至关重要的作用。

### 概述和运输层服务

运输层协议为运行在不同主机上的应用进程之间提供了逻辑通信功能，概念如下图所示：

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190608204654.png)

可以看到，运输层协议是在端系统而不是在路由器中实现的：

- 报文段：在发送端，运输层协议将从发送应用程序进程接收到的报文转化成运输层分组，该分组即运输层报文段
- 网络应用程序可以使用多钟运输层协议：TCP、UDP

#### 运输层和网络层的关系

运输层位于网络层之上，网络层提供了主机间的**逻辑通信**，而运输层为运行在不同主机上的进程之间提供了**逻辑通信**

#### 因特网运输层概述

因特网（TCP/IP网络）为应用层提供了两种截然不同的运输层协议：

- UDP（用户数据报协议）：为调用它的应用程序提供了一种不可靠、无连接的服务
- TCP（传输控制协议）：为调用它的应用程序提供了一种可靠的面向连接的服务

在与因特网有关的环境中，将运输层分组称为报文段。UDP和TCP最基本的责任是，将两个系统间IP的交付服务扩展为运行在端系统上的两个进程之间的交付服务。将主机间交付扩展到进程间交付被称为运输层的多路复用与多路分解

### 多路复用与多路分解

将运输层报文段中的数据交付到正确的套接字的工作称为多路分解。在源主机从不同套接字中收集数据块，并为每个数据封装上首部信息，从而生成报文段，然后将报文段传递到网络层，称为多路复用。

运输层多路复用要求：
- 套接字有唯一标志符
- 每个报文段有特殊字段来指示该报文段所要支付到的套接字

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190612174440.png)

TCP中的多路复用与多路分解更为复杂

- 无连接的多路复用与多路分解
- 面向连接的多路复用与多路分解

### 无连接传输UDP